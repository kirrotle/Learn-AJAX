<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="./JS/axios/axios.min.js"></script>
</head>

<style>
  input[type="file"] {
    display: none;
  }

  .upload {
    font-size: 30px;
    color: red;
  }
</style>

<body>
  <!-- 透過將input隱藏來讓label的樣式顯示 -->
  <label for="upload" class="upload">選擇檔案</label>
  <input id="upload" type="file" accept=".png">
  <img id="image" src="" alt="">

</body>

<script>
  let el = document.querySelector('#upload')
  el.addEventListener('change', function (e) {
    //須注意這邊的取值方式
    //e.target.files[0]取得的是檔案,
    //但顯示在console那邊是一個Object,
    //裡面是檔案的資訊
    console.dir(e.target.files[0])
    let file = e.target.files[0]

    let formdata = new FormData()
    //這邊會填img是因為後端要取得變數名字為img的資料
    //並不是副檔名為img的檔案
    formdata.append('img', file)

    //這邊data已經不是帶Json了,是帶formdata
    axios({
      url: 'https://hmajax.itheima.net/api/uploadimg',
      method: 'post',
      data: formdata
    }).then((result) => {
      console.log(result)
      console.log(result.data.data.url)
      document.querySelector('#image').src = result.data.data.url
    }).catch((err) => {
      console.log(err)
    });
  })

</script>

</html>